//index.html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>DOMADO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="container">
    <!-- ì‚¬ì´ë“œë°” -->
    <nav class="sidebar">
      <div class="sidebar-logo-container">
        <img src="{{ url_for('static', filename='img/title.png') }}" alt="ë„ë§ˆë„" class="sidebar-logo">
      </div>

      <div class="menu-top">
        <button class="menu-btn active" id="scheduleBtn">ì¼ì •</button>
        <button class="menu-btn" id="memoBtn">ë©”ëª¨</button>
      </div>

      <div class="menu-bottom">
        <button class="menu-btn add-btn" id="globalAddBtn">
          ì¶”ê°€
        </button>
      </div>

      <div class="settings-wrap">
        <button class="settings-btn">ì„¤ì •</button>
      </div>
    </nav>

    <!-- ë©”ì¸ ì˜ì—­ -->
    <main class="main">

      <!-- âœ… ì¼ì • ë·° -->
      <section id="scheduleView" class="view active">
        <div class="schedule-header">
          <div id="scheduleDateBar" class="date-bar"></div>
        </div>

        <div class="schedule-board">
          <div class="schedule-title-row">
            <h2 id="scheduleCurrentDate" class="schedule-date-label"></h2>
            <button id="addScheduleBtn" class="schedule-add-btn">ì¼ì • ì¶”ê°€</button>
          </div>

          <ul id="scheduleList" class="schedule-list"></ul>

          <p class="schedule-hint">
            âœ” í´ë¦­ ì‹œ ì¼ì • ì™„ë£Œ ì²˜ë¦¬ / ğŸ—‘ í´ë¦­ ì‹œ ì‚­ì œ<br>
            (ë¡œê·¸ì¸í•œ ê³„ì •ëª…ìœ¼ë¡œ LocalStorageì— ì €ì¥)
          </p>
        </div>
      </section>

      <!-- âœ… ë©”ëª¨ ë·° -->
      <section id="memoView" class="view">
        <div id="dateBar" class="date-bar"></div>

        <div id="memoList" class="memo-list"></div>

        <div id="memoInputBox" class="memo-input hidden">
          <input id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
          <textarea id="content" placeholder="ë³¸ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          <div class="input-actions">
            <button id="saveMemo" class="check-btn">âœ”</button>
            <button id="cancelMemo" class="cancel-btn">âœ–</button>
          </div>
        </div>

        <button id="toggleMonth">ë‹¬ë ¥ ë³´ê¸°</button>
        <div id="monthCalendar" class="month-calendar">
          <div class="month-header">
            <button id="prevMonth">&lt;</button>
            <span id="monthLabel"></span>
            <button id="nextMonth">&gt;</button>
          </div>
          <div id="calendarGrid" class="calendar-grid"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- ğŸ” ì„œë²„ ì„¸ì…˜ â†’ LocalStorage ì €ì¥ -->
  <script>
    const userIdFromServer = "{{ user_id if user_id is not none else '' }}";
    const usernameFromServer = "{{ username if username is not none else '' }}";

    if (userIdFromServer) {
      // ë¡œê·¸ì¸ ë˜ì–´ ìˆìŒ â†’ localStorageì— ì €ì¥
      localStorage.setItem('loggedInUser', userIdFromServer);
      localStorage.setItem('loggedInUsername', usernameFromServer);
    } else {
      // ë¡œê·¸ì¸ ì•ˆ ë˜ì–´ ìˆìŒ â†’ localStorage ë¹„ìš°ê¸°
      localStorage.removeItem('loggedInUser');
      localStorage.removeItem('loggedInUsername');
    }
  </script>

  <!-- JS ë¡œë“œ ìˆœì„œ (ì ˆëŒ€ ë³€ê²½ X) -->
  <script src="{{ url_for('static', filename='main.js') }}" defer></script>
  <script src="{{ url_for('static', filename='memo.js') }}" defer></script>
  <script src="{{ url_for('static', filename='schedule.js') }}" defer></script>
</body>
</html>

//main.js
// static/main.js

document.addEventListener('DOMContentLoaded', () => {
  const scheduleBtn = document.getElementById('scheduleBtn');
  const memoBtn = document.getElementById('memoBtn');
  const scheduleView = document.getElementById('scheduleView');
  const memoView = document.getElementById('memoView');

  // ìš”ì†Œë“¤ ì—†ìœ¼ë©´ (ë‹¤ë¥¸ í˜ì´ì§€) ê·¸ëƒ¥ ì¢…ë£Œ
  if (!scheduleBtn || !memoBtn || !scheduleView || !memoView) return;

  scheduleBtn.addEventListener('click', () => {
    scheduleView.classList.add('active');
    memoView.classList.remove('active');
    scheduleBtn.classList.add('active');
    memoBtn.classList.remove('active');
  });

  memoBtn.addEventListener('click', () => {
    memoView.classList.add('active');
    scheduleView.classList.remove('active');
    memoBtn.classList.add('active');
    scheduleBtn.classList.remove('active');
  });
});

//schedule.js
// static/schedule.js

document.addEventListener('DOMContentLoaded', () => {
  const scheduleView = document.getElementById('scheduleView');
  if (!scheduleView) return;

  const userId = localStorage.getItem("loggedInUser") || "guest";
  const STORAGE_KEY = `domado-schedule-${userId}`;

  let schedules = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
  let currentDate = getToday();

  const dateBarEl = document.getElementById("scheduleDateBar");
  const currentDateEl = document.getElementById("scheduleCurrentDate");
  const listEl = document.getElementById("scheduleList");
  const addBtn = document.getElementById("addScheduleBtn");

  if (!dateBarEl || !currentDateEl || !listEl || !addBtn) {
    console.warn("Schedule elements missing");
    return;
  }

  function getToday() {
    const d = new Date();
    return d.toISOString().slice(0, 10);
  }

  function createDatePills() {
    dateBarEl.innerHTML = "";
    const base = new Date(currentDate);

    for (let offset = -3; offset <= 3; offset++) {
      const d = new Date(base);
      d.setDate(d.getDate() + offset);
      const key = d.toISOString().slice(0, 10);

      const pill = document.createElement("button");
      pill.className = "date-btn";
      pill.dataset.date = key;
      pill.textContent = key.slice(5);
      if (key === currentDate) pill.classList.add("selected");

      pill.onclick = () => {
        currentDate = key;
        render();
      };

      dateBarEl.appendChild(pill);
    }
  }

  function render() {
    // ë‚ ì§œ ì„ íƒ í‘œì‹œ
    document.querySelectorAll("#scheduleDateBar .date-btn").forEach(p => {
      p.classList.toggle("selected", p.dataset.date === currentDate);
    });

    currentDateEl.textContent = currentDate;

    listEl.innerHTML = "";
    const list = schedules[currentDate] || [];

    if (!list.length) {
      const li = document.createElement("li");
      li.textContent = "ì¼ì •ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”.";
      li.className = "hint-text";
      listEl.appendChild(li);
      return;
    }

    list.forEach((item, i) => {
      const li = document.createElement("li");
      li.className = "schedule-item";

      const time = document.createElement("span");
      time.className = "schedule-time";
      time.textContent = item.time || "-";

      const text = document.createElement("span");
      text.className = "schedule-text";
      if (item.done) text.classList.add("done");
      text.textContent = item.text;

      const doneBtn = document.createElement("button");
      doneBtn.className = "btn-icon btn-check";
      doneBtn.textContent = item.done ? "âœ…" : "âœ”";
      doneBtn.onclick = () => {
        item.done = !item.done;
        save();
        render();
      };

      const delBtn = document.createElement("button");
      delBtn.className = "btn-icon btn-delete";
      delBtn.textContent = "ğŸ—‘";
      delBtn.onclick = () => {
        list.splice(i, 1);
        save();
        render();
      };

      li.append(time, text, doneBtn, delBtn);
      listEl.appendChild(li);
    });
  }

  function addSchedule() {
    const time = prompt("ì‹œê°„ (ì˜ˆ: 10:00, ìƒëµ ê°€ëŠ¥)");
    const text = prompt("ì¼ì • ë‚´ìš©");
    if (!text) return;

    if (!schedules[currentDate]) schedules[currentDate] = [];
    schedules[currentDate].push({ time: time || "", text, done: false });
    save();
    render();
  }

  function save() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(schedules));
  }

  addBtn.addEventListener("click", addSchedule);
  createDatePills();
  render();
});


//style.css
/* ê³µí†µ ë·° í† ê¸€ */
.view {
  display: none;
}

.view.active {
  display: block;
}

/* í°íŠ¸ */
@font-face {
  font-family: 'ChangwonDanggamAsak';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/CWDangamAsac-Bold.woff') format('woff');
  font-weight: normal;
  font-display: swap;
}

@import url('//fonts.googleapis.com/earlyaccess/hanna.css');

body {
  margin: 0;
  font-family: 'ChangwonDanggamAsak', Arial, sans-serif;
}

.container {
  display: flex;
  height: 100vh;
}

/* ì‚¬ì´ë“œë°” */
.sidebar {
  width: 140px;
  background-color: #899574;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 15px;
}

.sidebar-logo-container {
  height: 80px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 10px;
}

.sidebar-logo {
  max-height: 100%;
}

.menu-top {
  display: flex;
  flex-direction: column;
  gap: 15px;
  align-items: center;
}

.menu-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  padding: 10px;
  width: 100%;
  cursor: pointer;
  font-size: 18px;
  color: black;
  border-radius: 8px;
}

.menu-btn.active {
  font-weight: bold;
  border: 2px solid #000;
  background-color: #fff;
}

.menu-bottom {
  margin-top: 10px;
}

.add-btn {
  width: 100%;
  padding: 15px 0;
  background-color: #fff;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 20px;
  font-weight: 800;
}

.settings-wrap {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

.settings-btn {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

/* ë©”ì¸ */
.main {
  flex: 1;
  padding: 10px;
}

/* ìƒë‹¨ ë‚ ì§œ ë°” (ê³µí†µ) */
.date-bar {
  display: flex;
  justify-content: center;
  gap: 16px;
  background-color: #97b47e;
  padding: 12px 20px;
  border-radius: 12px;
  font-family: 'ChangwonDanggamAsak', Arial, sans-serif;
}

.date-btn {
  border: none;
  background: transparent;
  font-size: 26px;
  font-weight: 800;
  cursor: pointer;
  padding: 6px 14px;
  border-radius: 18px;
}

.date-btn.selected {
  background-color: #ffffff;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
}

/* ===== ì¼ì • í™”ë©´ ===== */

.schedule-header {
  display: flex;
  justify-content: center;
  margin-bottom: 10px;
}

.schedule-board {
  width: 95%;
  margin: 8px auto 0 auto;
  background-color: #fbf3ab;
  border-radius: 12px;
  padding: 20px 25px;
  box-sizing: border-box;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
  min-height: calc(100vh - 150px);
}

.schedule-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.schedule-date-label {
  margin: 0;
  font-size: 24px;
  font-weight: 800;
}

.schedule-add-btn {
  padding: 8px 18px;
  border-radius: 20px;
  border: none;
  background-color: #ffffff;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  font-size: 16px;
  font-weight: 700;
}

.schedule-list {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
}

.schedule-item {
  display: grid;
  grid-template-columns: 90px 1fr 46px 46px;
  align-items: center;
  padding: 16px 14px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

.schedule-time {
  font-size: 22px;
  font-weight: 800;
}

.schedule-text {
  font-size: 22px;
  font-weight: 700;
}

.schedule-text.done {
  color: rgba(0, 0, 0, 0.35);
  text-decoration: line-through;
}

.btn-icon {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.btn-check {
  background-color: #ffe18a;
}

.btn-delete {
  background-color: #ffe18a;
}

.schedule-hint {
  margin-top: 14px;
  font-size: 12px;
  color: #555;
  font-family: 'Hanna', sans-serif;
}

/* ===== ë©”ëª¨ í™”ë©´ ===== */

.memo-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.memo-item {
  position: relative;
  background-color: white;
  border-radius: 8px;
  padding: 15px 10px 10px 10px;
  min-width: 120px;
  max-width: 150px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  font-family: 'Hanna', sans-serif;
}

.memo-item .tomato-img {
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: auto;
}

.memo-input {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 320px;
  transform: translate(-50%, -50%);
  background-color: white;
  border-radius: 12px;
  padding: 15px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 400;
}

.hidden {
  display: none;
}

.title-input {
  font-size: 18px;
  font-weight: bold;
  padding: 5px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.content-input {
  font-size: 14px;
  padding: 5px;
  border-radius: 8px;
  border: 1px dashed #ccc;
  min-height: 60px;
}

.input-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.check-btn,
.cancel-btn {
  width: 35px;
  height: 35px;
  border: none;
  border-radius: 50%;
  font-size: 16px;
  cursor: pointer;
}

.check-btn {
  background-color: #4CAF50;
  color: white;
}

.cancel-btn {
  background-color: #f44336;
  color: white;
}

//ğŸ˜°í˜„ì¬ì˜ ë¬¸ì œì 
1. ì¼ì • ì¶”ê°€ ë²„íŠ¼ì´ add_buttom.pngë¡œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•ŠìŒ. ì¼ì •ê³¼ ë©”ëª¨ê°€ ì„œë¡œ ì¶”ê°€ ì„¤ì •ì„ ê³µìœ í•¨
2. ë§¨ ìœ„ ë‚ ì§œ ë§‰ëŒ€ ë°‘ì— ì•„ë˜ í™”ì‚´í‘œê°€ ë””ìì¸ì´ ìˆì–´ì•¼ í•˜ê³  ê·¸ê±¸ ëˆ„ë¥´ë©´ ë‹¬ë ¥ë³´ê¸° ê¸°ëŠ¥ ìˆì–´ì•¼ í•¨(ë…„,ë‹¬,ì¼ ì„ íƒ ê°€ëŠ¥)
3. ì¼ì • ì¶”ê°€ ì‹œ, íƒ€ì„ í”¼ì»¤ë¡œ ì‹œê°„ì„ ê³ ë¥´ê³  ì…ë ¥í•´ì•¼ í•¨
4. ìœ ì €ê°€ ì„¤ì •í•œ ì‹œê°„ì„ ë³´ì—¬ì£¼ëŠ” ë¶€ë¶„ì´ ê³ ì •ë˜ì–´ì•¼ í•¨