<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>DOMADO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="container fixed-container">
    <!-- ì‚¬ì´ë“œë°” -->
    <nav class="sidebar">
      <div class="sidebar-logo-container">
        <img src="{{ url_for('static', filename='img/title.png') }}" alt="ë„ë§ˆë„" class="sidebar-logo">
      </div>

      <div class="menu-top">
        <button class="menu-btn active" id="scheduleBtn">ì¼ì •</button>
        <button class="menu-btn" id="memoBtn">ë©”ëª¨</button>
      </div>

      <div class="menu-bottom">
        <button class="add-btn" id="globalAddBtn">
          <img src="{{ url_for('static', filename='img/add_button.png') }}" alt="ì¶”ê°€" class="sidebar-add-img">
        </button>
      </div>

      <div class="settings-wrap">
        <button class="settings-btn">ì„¤ì •</button>
      </div>
    </nav>

    <!-- ë©”ì¸ ì˜ì—­ -->
    <main class="main">

      <!-- âœ… ì¼ì • ë·° -->
      <section id="scheduleView" class="view active">
        <div class="schedule-header">
          <div id="scheduleDateBar" class="date-bar"></div>
        </div>

        <div class="schedule-board">
          <div class="schedule-title-row">
            <h2 id="scheduleCurrentDate" class="schedule-date-label"></h2>
            <!-- ì¼ì • ì¶”ê°€ ë²„íŠ¼ ì œê±°, ì‚¬ì´ë“œë°” "ì¶”ê°€"ë§Œ ì‚¬ìš© -->
          </div>
          <ul id="scheduleList" class="schedule-list"></ul>
        </div>
      </section>

      <!-- âœ… ë©”ëª¨ ë·° -->
      <section id="memoView" class="view">
        <div id="dateBar" class="date-bar"></div>

        <div id="memoList" class="memo-list"></div>

        <div id="memoInputBox" class="memo-input hidden">
          <input id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
          <textarea id="content" placeholder="ë³¸ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          <div class="input-actions">
            <button id="saveMemo" class="check-btn">âœ”</button>
            <button id="cancelMemo" class="cancel-btn">âœ–</button>
          </div>
        </div>

        <button id="toggleMonth">ë‹¬ë ¥ ë³´ê¸°</button>
        <div id="monthCalendar" class="month-calendar">
          <div class="month-header">
            <button id="prevMonth">&lt;</button>
            <span id="monthLabel"></span>
            <button id="nextMonth">&gt;</button>
          </div>
          <div id="calendarGrid" class="calendar-grid"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- ğŸ” ì„œë²„ ì„¸ì…˜ â†’ LocalStorage ì €ì¥ -->
  <script>
    const userIdFromServer = "{{ user_id if user_id is not none else '' }}";
    const usernameFromServer = "{{ username if username is not none else '' }}";

    if (userIdFromServer) {
      // ë¡œê·¸ì¸ ë˜ì–´ ìˆìŒ â†’ localStorageì— ì €ì¥
      localStorage.setItem('loggedInUser', userIdFromServer);
      localStorage.setItem('loggedInUsername', usernameFromServer);
    } else {
      // ë¡œê·¸ì¸ ì•ˆ ë˜ì–´ ìˆìŒ â†’ localStorage ë¹„ìš°ê¸°
      localStorage.removeItem('loggedInUser');
      localStorage.removeItem('loggedInUsername');
    }
  </script>

  <!-- JS ë¡œë“œ ìˆœì„œ (ì ˆëŒ€ ë³€ê²½ X) -->
  <script src="{{ url_for('static', filename='main.js') }}" defer></script>
  <script src="{{ url_for('static', filename='memo.js') }}" defer></script>
  <script src="{{ url_for('static', filename='schedule.js') }}" defer></script>
</body>
</html>
